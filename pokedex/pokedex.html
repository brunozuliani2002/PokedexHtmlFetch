<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sua Tela</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            background-color: #3498db;
            color: #fff;
            text-align: center;
            padding: 10px;
            width: 100%;
        }

        #lista {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        #pokedex {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .pokemon-card {
            margin: 10px;
            text-align: center;
            display: flex;
            flex-direction: column;
        }

        footer {
            background-color: #3498db;
            color: #fff;
            text-align: center;
            padding: 10px;
            width: 100%;
        }
    </style>
</head>
<body>

<header>
    <button id="btnVoltarPage">Voltar pagina</button>
    <button id="btnProximaPage">Proxima pagina</button>
    <button id="btnPokedex">Pokedex</button>

    <div id="status"></div>
    <div id="lista"></div>
</header>

<script>
    let offset = 0;
    const pokedex = loadPokedex();

    document.getElementById("btnProximaPage").onclick = function () {
        offset += 30;
        loadPokemonList();
    };

    document.getElementById("btnVoltarPage").onclick = function () {
        if (offset != 0) {
            offset -= 30;
            loadPokemonList();
        }
    };

    document.getElementById("btnPokedex").onclick = function () {
        savePokedex(pokedex);
        window.location.href = "pokedexx.html";
    };

    // Carregar a lista de Pokémon ao carregar a página
    loadPokemonList();

    function loadPokemonList() {
        fetch(`https://pokeapi.co/api/v2/pokemon?limit=30&offset=${offset}`)
            .then(response => response.json())
            .then(function (data) {
                let lista = document.getElementById('lista');
                lista.innerHTML = "";

                if (data.results) {
                    data.results.forEach(function (pokemon) {
                        fetch(pokemon.url)
                            .then(response => response.json())
                            .then(function (pokemonData) {
                                const pokemonCard = document.createElement('div');
                                pokemonCard.className = 'pokemon-card';

                                const pokemonImg = document.createElement('img');
                                pokemonImg.src = pokemonData.sprites.back_default;

                                pokemonCard.appendChild(pokemonImg);
                                pokemonCard.innerHTML += `<p>${pokemonData.name}</p>`;

                                const addButton = document.createElement('button');
                                addButton.innerText = 'Adicionar';

                                addButton.addEventListener('click', function () {
                                    addPokemonToPokedex(pokemonData);
                                });

                                const detailsButton = document.createElement('button');
                                detailsButton.innerText = 'Ver Detalhes';

                                detailsButton.addEventListener('click', function () {
                                    showDetails(pokemonData);
                                });

                                pokemonCard.appendChild(addButton);
                                pokemonCard.appendChild(detailsButton);
                                lista.appendChild(pokemonCard);
                            });
                    });
                }
            });
    }

    function addPokemonToPokedex(pokemon) {
        pokedex.push(pokemon);
        console.log(`${pokemon.name} adicionado à pokedex!`);
        savePokedex(pokedex);
    }

    function showDetails(pokemon) {
    const abilitiesString = pokemon.abilities.map(ability => ability.ability.name).join(", ");
    alert(`Detalhes do Pokémon:\nNome: ${pokemon.name}\nAltura: ${pokemon.height}\nPeso: ${pokemon.weight}\nHabilidades: ${abilitiesString}`);
}

    function loadPokedex() {
        const storedPokedex = JSON.parse(localStorage.getItem("pokemons")) || [];
        return storedPokedex;
    }

    function savePokedex(pokedexToSave) {
        localStorage.setItem("pokemons", JSON.stringify(pokedexToSave));
    }
</script>
</body>
</html>
